{% extends "recipes/base.html" %} {% block content %}
<h1 class="mb-3">Recipes for Category {{ cat_title }} ({{ recipes.paginator.count }})</h1> {% for recipe in recipes %}
<recipe class="media content-section">
  <div class="media-body">
    <div class="recipe-metadata">
      {% for cat in recipe.get_categories %}
      <a href="{% url 'category-recipes' cat.pk %}" class="badge badge-primary">{{ cat.title }}</a> {% endfor %}
      <small class="text-muted">{{ recipe.prep_time }}</small>
      <span style="float:right;">
                <a class="mr-2" href="{% url 'user-recipes' recipe.author.username%}">{{ recipe.author }}</a>
            </span>
    </div>
    <h2><a class="recipe-title" href="{% url 'recipe-detail' recipe.id %}">{{ recipe.title }}</a></h2>
    <img class="recipe-img" src="{{ recipe.image.url }}">
  </div>
</recipe>
{% endfor %}

    {% if recipes.has_previous %}
      <a class="btn btn-outline-info mb-4" href="?page=1">First</a>
      <a class="btn btn-outline-info mb-4" href="?page={{ recipes.previous_page_number }}">Previous</a>
    {% endif %}

    {% for num in recipes.paginator.page_range %}
      {% if recipes.number == num %}
        <a class="btn btn-info mb-4" href="?page={{ num }}">{{ num }}</a>
      {% elif num > recipes.number|add:'-3' and num < recipes.number|add:'3' %}
        <a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{ num }}</a>
      {% endif %}
    {% endfor %}

    {% if recipes.has_next %}
      <a class="btn btn-outline-info mb-4" href="?page={{ recipes.next_page_number }}">Next</a>
      <a class="btn btn-outline-info mb-4" href="?page={{ recipes.paginator.num_pages }}">Last</a>
    {% endif %}

{% endblock content %}
